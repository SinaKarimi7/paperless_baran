
//var a = e("9361234567");
////console.open(a);
//console.log(d(a));
//
//function e (mobile){
//    mobile =  "0" +  String(Number(mobile) + 84);
//    return mobile ;
//}
//
//function d (mobile){
//    mobile =  "0" +  String(Number(mobile) - 84);
//    return mobile ;
//}

//var dabir = {
//    title : "دبیر" ,
//    name : "dabir" ,
//    permissions : [
//        "define_task_child" ,
//        "sms_to_all" ,
//        "sms_to_child" ,
//        "sms_to_custom" ,
//        "add_dispatch" ,
//        "set_free_times"
//    ],
//    _parent_id : "550a8b6f4a77478c379f5575" ,
//    _enable : true
//};
//
//
//var pazhoohesh = {
//    title : "پژوهش" ,
//    name : "pazhooh" ,
//    permissions : [
//        "define_task_child" ,
//        "sms_to_all" ,
//        "sms_to_child" ,
//        "sms_to_custom" ,
//        "add_dispatch" ,
//        "set_free_times"
//    ],
//    _enable : true
//};
//
//var ensani = {
//    title : "انسانی" ,
//    name : "ensani" ,
//    permissions : [
//        "sms_to_all" ,
//        "sms_to_child" ,
//        "set_free_times"
//    ],
//    _enable : true
//};
//
//var amozesh = {
//    title : "آموزش" ,
//    name : "amoozesh" ,
//    permissions : [
//        "define_task_child" ,
//        "sms_to_all" ,
//        "sms_to_child" ,
//        "sms_to_custom" ,
//        "add_dispatch" ,
//        "set_free_times"
//    ],
//    _enable : true
//};


//new db.tasks(dabir).save(function(err,d){
//    pazhoohesh._parent = d._id ;
//    amozesh._parent = d._id ;
//    new db.tasks(pazhoohesh).save(function(err,p){
//        ensani._parent = p._id ;
//       new db.tasks(ensani).save();
//    });
//    new db.tasks(amozesh).save();
//});

//new db.tasks(dabir).save(function(err,d){
//    pazhoohesh._parent = d._id ;
//    amozesh._parent = d._id ;
//    new db.tasks(pazhoohesh).save(function(err,p){
//        ensani._parent = p._id ;
//       new db.tasks(ensani).save();
//    });
//    new db.tasks(amozesh).save();
//});
//
//var a = "2" ;
//console.log(Number(a) == "NaN");

//function rec (){
//
//}

//function e (mobile){
//    mobile = String(mobile);
//    if(mobile.substring(0,1) == "0") mobile = mobile.substring(1,mobile.length);
//    var _2 = Number(mobile.substring(5,6)) + Number(mobile.substring(1,2)) ;
//    var _ = (Number(mobile.substring(3,4))+84+_2)%10 ;
//    var __ = (Number(mobile.substring(6,7))+85+_2)%10 ;
//    var ___ = (Number(mobile.substring(8,9))+84+_2)%10 ;
//    var ____ = (Number(mobile.substring(9,10))+88+_2)%10 ;
//    var _3 = mobile.length > 11 ? mobile.substring(10,mobile.length) : "" ;
//    return "0" + mobile.substring(0,3) + String(_)  + mobile.substring(4,6) + String(__) + mobile.substring(7,8) + String(___) + String(____) + _3;
//}

//function d (mobile){
//    mobile = String(mobile);
//    if(mobile.substring(0,1) == "0") mobile = mobile.substring(1,mobile.length);
//    var _2 = Number(mobile.substring(5,6)) + Number(mobile.substring(1,2)) ;
//    var _ = (Number(mobile.substring(3,4))-84-_2)%10 ;
//    var __ = (Number(mobile.substring(6,7))-85-_2)%10 ;
//    var ___ = (Number(mobile.substring(8,9))-84-_2)%10 ;
//    var ____ = (Number(mobile.substring(9,10))-88-_2)%10 ;
//    var _3 = mobile.length > 11 ? mobile.substring(10,mobile.length) : "" ;
//    return "0" + mobile.substring(0,3) + String(_ >= 0 ? _ : _+10)  + mobile.substring(4,6) + String(__ >= 0 ? __ : __+10) + mobile.substring(7,8) + String(___ >= 0 ? ___ : ___+10) + String(____ >= 0 ? ____ : ____+10) + _3;
//}


//function rec (_id,res,level,leaf,recall){
//    res = res || [] ;
//    level = level || 0 ;
//    leaf = leaf || 0 ;
//    recall = recall || 0 ;
//    recall++ ;
//
////    console.open(res);
//    db.tasks.find({ _parent : _id }).lean().exec(function(err,users){
//        if(err) console.log(err);
//        else if (users && users.length > 0){
//            users.forEach(function(user){
//                user.rec_depth = level+1 ;
//                console.log(user.name);
//                res.push(user);
//                rec(user._id , res ,level+1 ,leaf ,recall);
//            })
//        } else {
//            leaf++ ;
////            console.log(recall);
//            if (leaf + res.length == recall ) {
////                console.log(recall);
//                console.open(res);
//            }
//        }
//    });
//}


//rec("550a9ae8498f262a6ef5d26e",[]);

//setTimeout(function(){
//    console.open(res);
//},1000);
//
//
//var dabir = {
//    title : "دبیر" ,
//    name : "dabir" ,
//    permissions : [
//        "define_task_child" ,
//        "sms_to_all" ,
//        "sms_to_child" ,
//        "sms_to_custom" ,
//        "add_dispatch" ,
//        "set_free_times"
//    ],
//    _parent_id : "550a8b6f4a77478c379f5575" ,
//    _enable : true
//};
//
//
//var pazhoohesh = {
//    title : "پژوهش" ,
//    name : "pazhooh" ,
//    permissions : [
//        "define_task_child" ,
//        "sms_to_all" ,
//        "sms_to_child" ,
//        "sms_to_custom" ,
//        "add_dispatch" ,
//        "set_free_times"
//    ],
//    _enable : true
//};
//
//var ensani = {
//    title : "انسانی" ,
//    name : "ensani" ,
//    permissions : [
//        "sms_to_all" ,
//        "sms_to_child" ,
//        "set_free_times"
//    ],
//    _enable : true
//};
//
//var amozesh = {
//    title : "آموزش" ,
//    name : "amoozesh" ,
//    permissions : [
//        "define_task_child" ,
//        "sms_to_all" ,
//        "sms_to_child" ,
//        "sms_to_custom" ,
//        "add_dispatch" ,
//        "set_free_times"
//    ],
//    _enable : true
//};


//var ee = String.enc_mobile("09358803784") ;
//console.log(ee);
//console.log(String.dec_mobile(ee));
//console.log(d());
//
//db.users.findOne({ _id : "550f3424f3296a1029472bf8" },function(err,d){
//    Date.en_to_persion_date(d.birth_date,function(dd){
//        console.open(dd);
//    })
//});



//var d = {
//    first_name : "نسترن" ,
//    last_name : "علی یاری نسب" ,
//    entering_uni_year : 1391 ,
//    mobile : String.enc_mobile("09387832692") ,
//    password : "aszxqw" ,
//    gender : true ,
//    native : true ,
//    age_group_decide : [ "elementary" , "secondary" ,"high_school" ] ,
//    _justified : true ,
//    _visited : true ,
//    _called : true ,
//    _creator : "550f3e661e7639763fad8e66" ,
//    _active : true
//};

//encrypt.hash(d.password,function(hash){
//    d.password = hash ;
//    new db.users(d).save(function(err){
//        if(!err) console.log("saved");
//    });
//});


//function rec (_id ,level ,callback){
//    db.tasks.find({ _id : _id },{ _id : true , name : true },function(err,res){
//        if(err) console.log(err);
//        if(res && res.length > 0){
//            res.forEach(function(r){
//                rec(r._id , level+1 ,function(data){
//                });
//            });
//        }
//    });
//}


// async for

//function rec(_id ,depth , flag,callback){
//    db.tasks.find({ _parent : _id }).lean().exec(function(err,tasks){
//        if(err) throw err ;
//        else if(tasks && tasks.length > 0){
//            for( var i = 0 ; i < tasks.length ; i++ ){
//                var res = [] ;
//                tasks[i].depth = depth ;
//                res.push(tasks[i]);
//                rec(tasks[i]._id ,depth+1 ,(i == tasks.length-1) ,function(_res){
//                    res = _res.concat(res);
//                    if(flag) callback(res ,flag);
//
////                    if( i == tasks.length-1 && callback) {
////                        callback(res ,flag); // todo : never come in this function because of i
////                    }
//                });
//            }
//        } else if (callback) {
//            callback([] ,flag);
//        }
//    });
//}



//function asyncLoop(iterations, func, callback) {
//    var index = 0;
//    var done = false;
//    var loop = {
//        next: function() {
//            if (done) {
//                return;
//            }
//
//            if (index < iterations) {
//                index++;
//                func(loop);
//
//            } else {
//                done = true;
//                if(callback) callback();
//            }
//        },
//
//        iteration: function() {
//            return index - 1;
//        },
//
//        break: function() {
//            done = true;
//            callback();
//        }
//    };
//    loop.next();
//    return loop;
//}






//function rec(_id ,depth ,callback){
////    console.log(depth);
//    db.tasks.find({ _parent : _id }).lean().exec(function(err,tasks){
////        console.open(tasks);
//        if(err) throw err ;
//        else if(tasks && tasks.length > 0){
//            asyncLoop(tasks.length, function(loop) {
//                var res = [] ;
////                console.open(tasks[loop.iteration()]);
//                tasks[loop.iteration()].depth = depth ;
//                res.push(tasks[loop.iteration()]);
////                res = res.concat(tasks);
//
//                rec(tasks[loop.iteration()]._id ,depth + 1 ,function(_res){
//                    loop.next();
//                    res = _res.concat(res);
//                });
//
//                if(loop.iteration() == tasks.length-1) {
//                    callback(res);
//                    console.open(res);
//                }
//            }/*,callback(res)*/);
//
//        } else if (callback) {
//            callback([]);
//        }
//    });
//}

//var a = [] ;
//
//function rec(_id ,depth ,callback){
//    db.tasks.find({ _parent : _id }).lean().exec(function(err,tasks){
//        if(err) throw err ;
//        else if(tasks && tasks.length > 0){
//
//            asyncLoop(tasks.length, function(loop) {
//                var res = [] ;
//                tasks[loop.iteration()].depth = depth ;
////                console.open(tasks[loop.iteration()]);
//                res.push(tasks[loop.iteration()]);
////                a.push(tasks[loop.iteration()]);
//
//                console.log(depth);
//
//                console.log("before" + " it -> " + loop.iteration());
//                console.open(res);
//
//                rec(tasks[loop.iteration()]._id ,depth + 1 ,function(_res){
//                    loop.next();
//
//                    console.log(depth);
//
//                    console.log("in rec before concat" + " it -> " + loop.iteration());
//                    console.open(res);
//                    console.log("in rec after concat");
//                    console.open(_res.concat(res));
//                    res = _res.concat(res);
//
//                });
//
//                if(loop.iteration() == tasks.length-1) {
//
//                    console.log(depth);
//                    console.log("after" + " it -> " + loop.iteration());
//                    callback(res);
//                    console.open(depth);
//                    console.open(res);
////                    a.push(res);
//                }
//            });
//
//        } else if (callback) {
//            callback([]);
//        }
//    });
//}
//
//
//rec("550a9ae8498f262a6ef5d26e",1,function(tree){
//    console.log("final res");
//    console.open(tree);
////    throw new Error({ error : ":(" });
//    console.log("ddddddddddddddddddddddddd");
////    console.open(a);
//});



//
//function rec (n ,callback){
////    console.log(n);
//    if(n == 1) callback(1) ;
//    else {
//        rec(n-1,function(c){
//            console.log(c);
//            callback(n*c);
//        });
//    }
//}
//
//rec(5,function(s){
//    console.log(s);
//});

//var a = ["1" , "2"];
//var b = ["2" , "3"];
//
////console.log(_.uniq(a.concat(b)));
//
//console.log("in");
//console.log(_.includes(a,"1"));


//var str = "0915 513 74 39";
//str = str.replace(/\s/g, '');
//console.log(str);

//var a = require('encrypt');
//
//a.hash('1qaz!QAZ',function(hash){
//   console.log(hash);
//});


//db.users.find({ password : { $exists : true } },{ _id : true , first_name : true , last_name : true },function(err,users){
//    var res = [] ;
//    console.log(users.length);
//
//});

//var a = 2 , b = 3 ;
//b = [a, a = b][0];
//
//console.log(a + " " + b);

//var a = [] ;
//console.log(typeof a);

//console.log(global.init.version);


    //function AJAX (url,data,success,error){
    //    $.ajax({
    //        url : url ,
    //        data : data ,
    //        success : function(d){
    //            if(d.auth == false ){
    //                window.location.replace('/');
    //            } else if (success) {
    //                success(d);
    //            }
    //        },
    //        error : function(err){
    //            if (error){
    //                error(err);
    //            }
    //        }
    //    })
    //}
    //
    //var url = "/" ;
    //var data = { username : "mostafa" , password : "123" };
    //
    //AJAX(url,data,function(res){
    //    if(res.ok == true){
    //        // success
    //    } else {
    //    }
    //},function(err){
    //    // error
    //});

//encrypt.hash("moneyman",function(hash){
//    console.log(hash);
//});
/*!
*   BaranGroup System v0.0.13
*   Author: Mehran Arjmand & Elyas Ghasemi
*   Website: Baran Group <http://barang.ir>
*   License: Open source - GNU
!*/

var app=angular.module("Baran",[]);app.controller("RegisterController",["$scope","$http",function(a,b){a.majorsList=[{name:"\u0646\u0631\u0645 \u0627\u0641\u0632\u0627\u0631",group:"\u06a9\u0627\u0645\u067e\u06cc\u0648\u062a\u0631"},{name:"\u0633\u062e\u062a \u0627\u0641\u0632\u0627\u0631",group:"\u06a9\u0627\u0645\u067e\u06cc\u0648\u062a\u0631"},{name:"\u0622\u06cc \u062a\u06cc",group:"\u06a9\u0627\u0645\u067e\u06cc\u0648\u062a\u0631"},{name:"\u06a9\u0627\u0631\u062f\u0627\u0646\u06cc",group:"\u06a9\u0627\u0645\u067e\u06cc\u0648\u062a\u0631"},{name:"\u0642\u062f\u0631\u062a",group:"\u0628\u0631\u0642"},{name:"\u0627\u0644\u06a9\u062a\u0631\u0648\u0646\u06cc\u06a9",group:"\u0628\u0631\u0642"},{name:"\u06a9\u0646\u062a\u0631\u0644",group:"\u0628\u0631\u0642"},{name:"\u0645\u062e\u0627\u0628\u0631\u0627\u062a",group:"\u0628\u0631\u0642"},{name:"\u0645\u0647\u0646\u062f\u0633\u06cc \u067e\u0632\u0634\u06a9\u06cc",group:"\u0645\u0647\u0646\u062f\u0633\u06cc"},{name:"\u0639\u0645\u0631\u0627\u0646",group:"\u0645\u0647\u0646\u062f\u0633\u06cc"},{name:"\u0645\u06a9\u0627\u0646\u06cc\u06a9",group:"\u0645\u0647\u0646\u062f\u0633\u06cc"},{name:"\u0635\u0646\u0627\u06cc\u0639",group:"\u0645\u0647\u0646\u062f\u0633\u06cc"},{name:"\u0645\u0648\u0627\u062f",group:"\u0645\u0647\u0646\u062f\u0633\u06cc"},{name:"\u0646\u0642\u0634\u0647 \u0628\u0631\u062f\u0627\u0631\u06cc",group:""},{name:"\u0634\u06cc\u0645\u06cc",group:""},{name:"\u0646\u0642\u0627\u0634\u06cc",group:""},{name:"\u06af\u0631\u0627\u0641\u06cc\u06a9",group:""},{name:"\u0639\u06a9\u0627\u0633\u06cc",group:""},{name:"\u0627\u062f\u0628\u06cc\u0627\u062a \u0641\u0627\u0631\u0633\u06cc",group:""},{name:"\u0627\u0644\u0647\u06cc\u0627\u062a",group:""},{name:"\u062d\u0642\u0648\u0642",group:""},{name:"\u062d\u0633\u0627\u0628\u062f\u0627\u0631\u06cc",group:""},{name:"\u062f\u0646\u062f\u0627\u0646\u067e\u0632\u0634\u06a9\u06cc",group:""},{name:"\u0641\u0646 \u0622\u0648\u0631\u06cc \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0633\u0644\u0627\u0645\u062a",group:""}],a.entryYear=[];for(var c=1380;c<=1394;c++)a.entryYear.push(c);a.Deactive=!1,a.showPassword=function(a){$("#"+a).attr("type","text")},a.hidePassword=function(a){$("#"+a).attr("type","password")},a.register=function(){a.Deactive=!0,b.post("/register",a.user).success(function(b){1==b.auth?(a.Deactive=!0,toastr.success("\u062e\u0648\u0634 \u0622\u0645\u062f\u06cc\u062f"),setTimeout(function(){window.location.assign("/")},1524)):(a.Deactive=!1,toastr.error("\u062b\u0628\u062a \u0646\u0627\u0645 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f."))}).error(function(){a.Deactive=!1,toastr.error("\u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u062a\u0644\u0627\u0634 \u06a9\u0646\u06cc\u062f.")})},a.validateMobile=function(){a.registerForm.mobile.$error.pattern||(a.Searching=!0,a.registerForm.mobile.$setValidity("unique",!1),b.post("/exists",{mobile:a.user.mobile}).success(function(b){a.Searching=!1,b.exists?toastr.error("\u0627\u06cc\u0646 \u0634\u0645\u0627\u0631\u0647 \u062a\u0645\u0627\u0633 \u0642\u0628\u0644\u0627 \u0639\u0636\u0648 \u0634\u062f\u0647 \u0627\u0633\u062a."):a.registerForm.mobile.$setValidity("unique",!0)}).error(function(){a.Searching=!1,toastr.error("\u062e\u0637\u0627 \u062f\u0631 \u0628\u0631\u0642\u0631\u0627\u0631 \u0627\u0631\u062a\u0628\u0627\u0637 \u0628\u0627 \u0633\u0631\u0648\u0631")}))},a.getMajorValue=function(a){return a.group?a.group+"-"+a.name:a.name},toastr.options={closeButton:!1,debug:!1,positionClass:"toast-bottom-left",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}]);